<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FitZone</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Link to the Razorpay Checkout script for handling payments -->
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    ::selection { background-color: #34d399; color: white; }
    html { scroll-behavior: smooth; }
    /* Styles for the modal overlays to handle visibility and centering */
    .modal-overlay {
      position: fixed; top: 0; left: 0; right: 0; bottom: 0;
      background-color: rgba(0, 0, 0, 0.6);
      display: flex; justify-content: center; align-items: center;
      z-index: 1000; opacity: 0; visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }
    .modal-overlay.active { opacity: 1; visibility: visible; }
    .modal-content {
      background-color: #fff; padding: 2.5rem; border-radius: 0.75rem;
      box-shadow: 0 20px 40px rgba(0,0,0,0.3); width: 90%; max-width: 500px;
      transform: translateY(-20px); transition: transform 0.3s ease;
      position: relative; max-height: 90vh; overflow-y: auto;
    }
    .modal-overlay.active .modal-content { transform: translateY(0); }
  </style>
</head>
<body class="bg-white text-gray-900">

  <!-- Header -->
  <header class="bg-white/80 backdrop-blur-lg shadow-md sticky top-0 z-50 transition duration-300">
    <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
      <span class="text-2xl font-bold text-green-600 tracking-wide">üèãÔ∏è FitZone</span>
      <div class="flex items-center gap-4">
        <input type="text" placeholder="Search gear..." class="hidden md:block border px-3 py-1.5 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"/>
        <div class="relative">
          <button onclick="toggleCart()" class="text-2xl relative focus:outline-none">
            üõí
            <span id="cartCount" class="absolute -top-2 -right-2 bg-green-600 text-white text-xs px-1.5 py-0.5 rounded-full">0</span>
          </button>
          <div id="cartDropdown" class="hidden absolute right-0 mt-2 w-72 bg-white border rounded-lg shadow-xl z-50 p-4">
            <h3 class="text-lg font-semibold mb-2">Your Cart</h3>
            <ul id="miniCartItems" class="max-h-48 overflow-y-auto text-sm space-y-2"></ul>
            <p id="miniCartTotal" class="font-bold mt-2 border-t pt-2">Total: ‚Çπ0</p>
            <!-- Changed the purchase button to open the checkout modal -->
            <button onclick="showCheckoutModal()" class="w-full mt-4 bg-green-600 text-white py-2 rounded hover:bg-green-700">Checkout</button>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Slideshow Section -->
  <div class="relative w-full max-w-6xl mx-auto mt-10 overflow-hidden rounded-xl shadow-lg">
    <div class="slideshow relative">
      <div class="slides transition duration-700 ease-in-out">
        <img class="w-full h-[400px] object-cover" src="sw1.png" alt="Slide 1">
        <img class="w-full h-[400px] object-cover hidden" src="sw2.png" alt="Slide 2">
        <img class="w-full h-[400px] object-cover hidden" src="sw3.png" alt="Slide 3">
      </div>

      <!-- Navigation Buttons -->
      <button id="prevBtn" class="absolute top-1/2 left-4 transform -translate-y-1/2 bg-white bg-opacity-60 hover:bg-opacity-80 text-gray-800 px-3 py-2 rounded-full shadow">
        <i class="fas fa-chevron-left"></i>
      </button>
      <button id="nextBtn" class="absolute top-1/2 right-4 transform -translate-y-1/2 bg-white bg-opacity-60 hover:bg-opacity-80 text-gray-800 px-3 py-2 rounded-full shadow">
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>
  </div>

  <!-- Products -->
  <section id="shop" class="max-w-7xl mx-auto py-20 px-6 bg-gray-50 rounded-xl">
    <h2 class="text-3xl font-bold mb-12 text-center">Best Fitness Gear</h2>
    <div class="grid md:grid-cols-3 gap-10">
      <div class="border rounded-xl overflow-hidden shadow-lg p-5 bg-white hover:shadow-2xl transition transform hover:scale-105">
        <img src="Adjustable Dumbbells (20kg).png" class="w-full h-72 object-cover mb-4 rounded-lg" />
        <h3 class="text-xl font-semibold">Adjustable Dumbbells (20kg)</h3>
        <p class="text-gray-600">‚Çπ2,999</p>
        <button onclick="addToCart('Adjustable Dumbbells', 2999)" class="mt-4 w-full bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Add to Cart</button>
      </div>
      <div class="border rounded-xl overflow-hidden shadow-lg p-5 bg-white hover:shadow-2xl transition transform hover:scale-105">
        <img src="Resistance Bands Set.png" class="w-full h-72 object-cover mb-4 rounded-lg" />
        <h3 class="text-xl font-semibold">Resistance Bands Set</h3>
        <p class="text-gray-600">‚Çπ799</p>
        <button onclick="addToCart('Resistance Bands', 799)" class="mt-4 w-full bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Add to Cart</button>
      </div>
      <div class="border rounded-xl overflow-hidden shadow-lg p-5 bg-white hover:shadow-2xl transition transform hover:scale-105">
        <img src="Yoga Mat (10mm).png" class="w-full h-72 object-cover mb-4 rounded-lg" />
        <h3 class="text-xl font-semibold">Yoga Mat (10mm)</h3>
        <p class="text-gray-600">‚Çπ1,299</p>
        <button onclick="addToCart('Yoga Mat', 1299)" class="mt-4 w-full bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Add to Cart</button>
      </div>
    </div>
  </section>

  <!-- Testimonials -->
  <section class="bg-white py-20 px-6">
    <div class="max-w-6xl mx-auto text-center">
      <h2 class="text-3xl font-bold mb-12">What Customers Say</h2>
      <div class="grid md:grid-cols-3 gap-8">
        <div class="bg-gray-100 p-6 rounded-lg shadow-md">
          <p class="italic text-gray-700">"Great quality gear, fast delivery! Helped me build my home gym."</p>
          <p class="mt-4 font-semibold text-green-600">‚Äì Aakash R.</p>
        </div>
        <div class="bg-gray-100 p-6 rounded-lg shadow-md">
          <p class="italic text-gray-700">"Love the resistance bands. They're sturdy and easy to carry."</p>
          <p class="mt-4 font-semibold text-green-600">‚Äì Neha M.</p>
        </div>
        <div class="bg-gray-100 p-6 rounded-lg shadow-md">
          <p class="italic text-gray-700">"I use the yoga mat daily ‚Äî very soft and thick."</p>
          <p class="mt-4 font-semibold text-green-600">‚Äì Priya S.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Newsletter -->
  <section class="bg-emerald-600 text-white py-20 px-6">
    <div class="max-w-xl mx-auto text-center">
      <h2 class="text-3xl font-bold mb-4">Get Fitness Tips & Deals</h2>
      <p class="mb-6">Subscribe to our newsletter and never miss an update.</p>
      <div class="flex flex-col sm:flex-row items-center gap-3">
        <input type="email" placeholder="Enter your email" class="w-full px-4 py-2 rounded text-gray-900 focus:outline-none" />
        <button class="bg-white text-green-700 font-semibold px-6 py-2 rounded hover:bg-gray-100">Subscribe</button>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="text-center py-6 bg-gray-100 text-sm text-gray-500 mt-12">
    ¬© 2025 FitZone. All rights reserved.
  </footer>
  
  <!-- CHECKOUT MODAL -->
  <div id="checkout-modal-overlay" class="modal-overlay">
    <div class="modal-content">
      <button onclick="hideCheckoutModal()" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700 text-2xl">
        <i class="fas fa-times"></i>
      </button>
      <h3 class="text-2xl font-bold mb-6 text-center">Checkout</h3>
      
      <div class="mb-6 space-y-4">
        <label class="block text-gray-700 font-semibold text-lg">Shipping Information</label>
        <input type="text" id="customer-name" placeholder="Full Name" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500" required>
        <input type="email" id="customer-email" placeholder="Email Address" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500" required>
        <input type="tel" id="customer-phone" placeholder="Phone Number" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500" required>
        <textarea id="customer-address" rows="3" placeholder="Shipping Address" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500" required></textarea>
      </div>
      
      <div class="bg-gray-100 p-4 rounded-lg mb-6">
        <div class="flex justify-between text-lg font-bold">
          <span>Total:</span>
          <span id="modal-total" class="text-green-600">‚Çπ0</span>
        </div>
      </div>
      
      <label class="block text-gray-700 mb-3 font-semibold text-lg">Select Payment Method</label>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <button onclick="handlePayment('Razorpay')" class="bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg shadow transition">
          <i class="fas fa-credit-card mr-2"></i> Pay with Razorpay
        </button>
        <button onclick="handlePayment('COD')" class="bg-white text-gray-800 border border-gray-300 font-semibold py-3 rounded-lg shadow hover:bg-gray-100 transition">
          <i class="fas fa-money-bill-wave mr-2"></i> Cash on Delivery
        </button>
      </div>
    </div>
  </div>

  <!-- CUSTOM MESSAGE MODAL -->
  <div id="message-modal-overlay" class="modal-overlay">
    <div class="modal-content text-center">
      <h3 id="message-title" class="text-2xl font-bold mb-4"></h3>
      <p id="message-text" class="text-gray-700 mb-6"></p>
      <button onclick="hideCustomMessage()" class="bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded-lg">
        Close
      </button>
    </div>
  </div>

  <!-- JavaScript -->
  <script>
    // Slideshow JS
    const slideImages = document.querySelectorAll('.slides img');
    let slideIndex = 0;

    function showSlide(index) {
      slideImages.forEach((img, i) => {
        img.classList.toggle('hidden', i !== index);
      });
    }

    document.getElementById('prevBtn').addEventListener('click', () => {
      slideIndex = (slideIndex - 1 + slideImages.length) % slideImages.length;
      showSlide(slideIndex);
    });

    document.getElementById('nextBtn').addEventListener('click', () => {
      slideIndex = (slideIndex + 1) % slideImages.length;
      showSlide(slideIndex);
    });

    // Auto-slide every 5 seconds
    setInterval(() => {
      slideIndex = (slideIndex + 1) % slideImages.length;
      showSlide(slideIndex);
    }, 5000);

    // Cart Logic
    const cart = [];
    let total = 0;
    let cartVisible = false;

    function addToCart(name, price) {
      cart.push({ name, price });
      total += price;
      updateCart();
      showCustomMessage('Added to Cart', `${name} has been added to your cart.`);
    }

    function updateCart() {
      const miniCartItems = document.getElementById("miniCartItems");
      const miniCartTotal = document.getElementById("miniCartTotal");
      const cartCount = document.getElementById("cartCount");

      miniCartItems.innerHTML = "";
      cart.forEach((item) => {
        miniCartItems.innerHTML += `
          <li class="flex justify-between">
            <span>${item.name}</span>
            <span>‚Çπ${item.price}</span>
          </li>
        `;
      });

      miniCartTotal.textContent = `Total: ‚Çπ${total}`;
      cartCount.textContent = cart.length;
    }

    // New Checkout Functions
    function showCheckoutModal() {
      if (cart.length === 0) {
        showCustomMessage('Cart is Empty', 'Please add items to your cart before checking out.');
        return;
      }
      // Update modal total and show the modal
      document.getElementById('modal-total').innerText = total;
      toggleCart(true); // Close the cart dropdown
      document.getElementById("checkout-modal-overlay").classList.add("active");
    }

    function hideCheckoutModal() {
      document.getElementById("checkout-modal-overlay").classList.remove("active");
    }

    function handlePayment(method) {
      // Get customer details from the form
      const customerName = document.getElementById('customer-name').value;
      const customerEmail = document.getElementById('customer-email').value;
      const customerPhone = document.getElementById('customer-phone').value;
      const customerAddress = document.getElementById('customer-address').value;
      
      if (!customerName || !customerEmail || !customerPhone || !customerAddress) {
        showCustomMessage('Information Required', 'Please fill out all shipping information to proceed.');
        return;
      }

      if (method === 'Razorpay') {
        const options = {
          key: "rzp_test_yourKeyHere", // <-- REPLACE WITH YOUR ACTUAL KEY
          amount: total * 100, // Amount in paise
          currency: "INR",
          name: "FitZone",
          description: "Order Payment",
          handler: function (response) {
            showCustomMessage('Payment Successful', `Your payment ID is: ${response.razorpay_payment_id}. Your order will be shipped soon!`);
            clearCart();
            hideCheckoutModal();
          },
          prefill: {
            name: customerName,
            email: customerEmail,
            contact: customerPhone
          },
          theme: {
            color: "#10b981" // A green theme color
          }
        };
        const rzp = new Razorpay(options);
        rzp.open();
      } else if (method === 'COD') {
        hideCheckoutModal();
        showCustomMessage('Order Confirmed!', `Your order has been placed. You will pay ‚Çπ${total} in cash upon delivery.`);
        clearCart();
      }
    }
    
    function clearCart() {
      cart.length = 0;
      total = 0;
      updateCart();
    }

    // Cart Dropdown Logic
    function toggleCart(forceClose = null) {
      const cartDropdown = document.getElementById("cartDropdown");
      if (forceClose === true || cartVisible) {
        cartDropdown.classList.add("hidden");
        cartVisible = false;
      } else {
        cartDropdown.classList.remove("hidden");
        cartVisible = true;
      }
    }

    // Custom Message Functions (Replaces `alert()`)
    function showCustomMessage(title, text) {
      document.getElementById('message-title').innerText = title;
      document.getElementById('message-text').innerText = text;
      document.getElementById('message-modal-overlay').classList.add('active');
    }

    function hideCustomMessage() {
      document.getElementById('message-modal-overlay').classList.remove('active');
    }

    // Event listener to close modal if clicking outside
    document.addEventListener('click', function(event) {
      const checkoutOverlay = document.getElementById("checkout-modal-overlay");
      const closeBtn = checkoutOverlay.querySelector('button');
      if (event.target === checkoutOverlay) {
        hideCheckoutModal();
      }
    });

    document.addEventListener('DOMContentLoaded', () => {
      showSlide(0); // Initialize slideshow on page load
      updateCart(); // Initialize cart state
    });

  </script>
</body>
</html>
